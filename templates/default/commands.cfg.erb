# Command definitions
#
# Autogenerated by Chef.

define command {
  command_name    check_local_disk
  command_line    $USER1$/check_disk -w $ARG1$ -c $ARG2$ -p $ARG3$
}

define command {
  command_name    check_local_load
  command_line    $USER1$/check_load -w $ARG1$ -c $ARG2$
}

define command {
  command_name    check_local_users
  command_line    $USER1$/check_users -w $ARG1$ -c $ARG2$
}

define command {
  command_name    check_local_log
  command_line    $USER1$/check_log -F $ARG1$ -O /tmp/nagios.logcheck.processed -q $ARG2$
}

define command {
  command_name    check_dns
  command_line    $USER1$/check_dns -H $ARG1$ -s $HOSTADDRESS$
}

define command {
  command_name    check_http_content
  command_line    $USER1$/check_http -I $HOSTADDRESS$ -H $ARG1$ -u $ARG2$ -s $ARG3$
}

define command {
  command_name    check_http_port
  command_line    $USER1$/check_http -I $HOSTADDRESS$ -H $HOSTADDRESS$ -p $ARG1$
}

define command {
  command_name    check_http_port_expect
  command_line    $USER1$/check_http -I $HOSTADDRESS$ -H $HOSTADDRESS$ -p $ARG1$ -e $ARG2$
}

define command {
  command_name    check_http_ip_port
  command_line    $USER1$/check_http -I $ARG1$ -H $ARG1$ -p $ARG2$
}

define command {
  command_name    check_mongrel_http_content
  command_line    $USER1$/check_http -I $HOSTADDRESS$ -H $ARG1$ -u $ARG2$ -s $ARG3$ -p $ARG4$
}

define command {
	command_name	check_tcp
	command_line	$USER1$/check_tcp -H $HOSTADDRESS$ -p $ARG1$
}

define command {
	command_name	check_udp
	command_line	$USER1$/check_udp -H $HOSTADDRESS$ -p $ARG1$
}

# nrpe remote host checks
define command {
	command_name    check_nrpe
	command_line    $USER1$/check_nrpe -H $HOSTADDRESS$ -c $ARG1$ -t 20
	}

# dummy commands for passive checks

define command {
	command_name	no-disk-checks
	command_line	/usr/local/nagios/libexec/check_dummy 2 "CRITICAL: Results of disk checks not coming in!"
}

define command {
	command_name	no-mem-checks
	command_line	/usr/local/nagios/libexec/check_dummy 2 "CRITICAL: Results of memory checks not coming in!"
}

# Notification
define command {
  command_name  host-notify-by-email
  command_line  /usr/bin/printf "%b" "$LONGDATETIME$\n\n$HOSTALIAS$ $NOTIFICATIONTYPE$ $HOSTSTATE$\n\n$HOSTOUTPUT$\n\nLogin: ssh://$HOSTNAME$" | <%=node['nagios']['server']['mail_command']%> -s "$NOTIFICATIONTYPE$ - $HOSTALIAS$ $HOSTSTATE$!" $CONTACTEMAIL$
}

define command {
  command_name  host-notify-by-sms-email
  command_line  /usr/bin/printf "%b" "$HOSTALIAS$ $NOTIFICATIONTYPE$ $HOSTSTATE$\n\n$HOSTOUTPUT$" | <%=node['nagios']['server']['mail_command']%> -s "$HOSTALIAS$ $HOSTSTATE$!" $CONTACTPAGER$
}

# 'notify-by-email' command definition
define command {
  command_name  service-notify-by-email
  command_line  /usr/bin/printf "%b" "$LONGDATETIME$ - $SERVICEDESC$ $SERVICESTATE$\n\n$HOSTALIAS$  $NOTIFICATIONTYPE$\n\n$SERVICEOUTPUT$\n\nLogin: ssh://$HOSTNAME$" | <%=node['nagios']['server']['mail_command']%> -s "** $NOTIFICATIONTYPE$ - $HOSTALIAS$ - $SERVICEDESC$ - $SERVICESTATE$" $CONTACTEMAIL$
}

#define command {
#        command_name process-service-perfdata
#        command_line /usr/lib/nagios/plugins/process_perfdata.pl
#}

#define command {
#        command_name process-host-perfdata
#        command_line /usr/lib/nagios/plugins/process_perfdata.pl -d HOSTPERFDATA
#}

# Commands added through nagios_services data bags
<% @services.each do |service| -%>
define command {
  command_name check_<%= service['id'] %>
  command_line <%= service ['command_line'] %>
}
<% end -%>
